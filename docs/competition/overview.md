# 第7回 全国医療AIコンテスト：オルガノイド画像の仮想染色

> [!IMPORTANT]
> このファイルには **事実と制約のみ** を記載する。戦略・感想・憶測は禁止。

---

## 1. タスク概要

| 項目 | 仕様 |
|------|------|
| **タスク種別** | Image-to-Image Generation |
| **入力** | 透過画像（512×512, grayscale） |
| **出力** | FAX蛍光画像（512×512, uint8） |

### データフロー

```
透過画像 (512x512, grayscale) → モデル → FAX蛍光画像 (512x512, uint8)
```

---

## 2. 評価指標

| 指標 | 役割 | 値域 | 目標方向 |
|------|------|------|----------|
| **SSIM** | 主指標 | 0.0 〜 1.0 | 高いほど良い |
| **PSNR** | 補助指標 | 0 〜 ∞ dB | 高いほど良い |

### 計算式

**SSIM (Structural Similarity Index)**:
```
SSIM(x,y) = (2μxμy + C1)(2σxy + C2) / ((μx² + μy² + C1)(σx² + σy² + C2))
```

**PSNR (Peak Signal-to-Noise Ratio)**:
```
PSNR = 10 × log10(MAX² / MSE)
```

---

## 3. 提出形式

| 項目 | 仕様 |
|------|------|
| **形式** | CSV |
| **カラム** | `id, pixel_0, pixel_1, ..., pixel_262143` |
| **ピクセル数** | 262,144 (= 512 × 512) |

### 提出ファイル例

```csv
id,pixel_0,pixel_1,pixel_2,...,pixel_262143
test_001,128,135,142,...,120
test_002,100,105,110,...,98
```

---

## 4. 実務上の重要ポイント

### 優先順位

1. **構造保持が最優先（SSIM）**
   - エッジ・テクスチャの再現性が評価の要
   - ぼやけた出力は厳しくペナルティを受ける

2. **明るさの絶対値より分布が重要**
   - 全体的なシフトより局所的なコントラスト
   - ヒストグラムの形状を意識

3. **ノイズはPSNRを著しく下げる**
   - ソルト&ペッパーノイズは致命的
   - スムージングと詳細保持のバランス

---

## 5. 勝ち筋仮説（初期）

> [!NOTE]
> 以下は初期仮説。実験結果に基づいて更新すること。

### アーキテクチャ

- **U-Net + Encoder転移学習**
  - ImageNet pretrained encoder（ResNet34/EfficientNet）
  - Skip connection による詳細保持

### 損失関数

```
Loss = L1 + λ × SSIM_Loss
```

- L1: ピクセル単位の誤差最小化
- SSIM Loss: 構造的類似度の最適化
- λ: ハイパーパラメータ（初期値 0.5〜1.0）

---

## 6. 制約事項

- [ ] 提出回数制限（要確認）
- [ ] 推論時間制限（要確認）
- [ ] 使用可能な外部データ（要確認）
